/*! Vimuse - HTML5 Media Player - 4.1.3
 * Copyright 2016, Nilok Bose
 * http://codecanyon.net/user/cosmocoder
*/
Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,s=function(){},a=function(){return i.apply(this instanceof s&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return s.prototype=this.prototype,a.prototype=new s,a}),function(e,t,i){"use strict";var s={init:function(s,a){this.options=s,this.isChrome=null!==navigator.userAgent.match(/chrome/gi),this.isSafari=null!==navigator.userAgent.match(/webkit/gi)&&!this.isChrome,this.isOpera=null!==navigator.userAgent.match(/opera/gi),this.isiOS=null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/gi),this.isAndroid=null!==navigator.userAgent.match(/android/i),this.hasTouch="ontouchstart"in i,this.msie=-1!=navigator.appName.toLowerCase().indexOf("microsoft"),this.isIE9=this.msie&&9==parseFloat(navigator.appVersion.split("MSIE")[1],10),this.isIE8=this.msie&&parseFloat(navigator.appVersion.split("MSIE")[1],10)<=8,this.ie9js=!!(this.msie&&i.IE7&&IE7.recalc),this.$app=e(a).addClass("vm-container playlist-"+this.options.playlistPosition+" cf"),this.$stage=e('<div class="vm-stage loading"/>').appendTo(this.$app),this.$currentInfo=e('<div class="current-item-info"/>').appendTo(this.$stage),this.$audioDetails=e('<div class="vm-audio-details"/>').appendTo(this.$stage),this.$audioPoster=this.$audioDetails.append('<div class="vm-audio-poster"><img src="" /></div>').children("div.vm-audio-poster"),this.$audioInfo=this.$audioDetails.append('<div class="vm-audio-info"><p class="track"></p><p class="artist"></p><p class="album"></p></div>').children("div.vm-audio-info"),this.$player=e('<div class="vm-player"/>').appendTo(this.$stage),this.$playlist=e('<ol class="vm-playlist"/>').appendTo(this.$app).addClass(this.options.playlistPosition),this.$window=e(i),this.curItemId=0,this.maxIdValue=-1,this.loopEnabled=!1,this.shuffleEnabled=!1,this.player=null,this.playlist=[],this.vmID=e("body").find(".vm-container").index(this.$app),this.$postrollContainer=e('<div id="vm-postroll-'+this.vmID+'" class="vm-postroll"/>').appendTo("body"),this.customMEPostroll(),this.$overlay=e("div.vm-player-overlay"),0===this.$overlay.length&&(this.$overlay=e('<div class="vm-player-overlay" />').appendTo("body")),!this.options.showCurrentItemInfo&&this.$currentInfo.css("display","none"),this.hasTouch?this.$playlist.addClass("touch"):this.$playlist.addClass("no-touch"),!this.hasTouch&&this.$playlist.addClass("custom-scrollbar"),this.clickEventType=this.hasTouch?"tap":"click","audio"===this.options.mediaType&&(this.$app.addClass("only-audio"),this.options.showFileTypeIcons=!1,this.options.showAudioDetails||this.$app.addClass("no-audio-details"),this.options.showAudioCover||this.$app.addClass("no-cover"),this.options.showAudioTrackInfo||this.$app.addClass("no-track-info")),this.createAuxControls(),(t.documentElement.requestFullscreen||t.documentElement.mozRequestFullScreen||t.documentElement.webkitRequestFullscreen||t.documentElement.msRequestFullscreen)&&this.$makeFullscreen.css("display","inline-block"),this.options.showPlaylistOnLoad||(this.$showPlaylist.removeClass("active"),this.$playlist.hide(),"bottom"!==this.options.playlistPosition&&this.$stage.css({width:"100%",margin:"auto","float":"none",height:"auto"})),this.options.shuffle&&this.shufflePlaylist(),this.getPlaylistData(),this.bindEvents(),e.expr[":"].contains=function(e,t,i){return jQuery(e).text().toUpperCase().indexOf(i[3].toUpperCase())>=0}},customMEPostroll:function(){e.extend(MediaElementPlayer.prototype,{buildvmpostroll:function(t,i,s){var a=this,l=a.container.find('link[rel="postroll"]').attr("href");"undefined"!=typeof l&&(t.postroll=e('<div class="mejs-postroll-layer mejs-layer"><a class="mejs-postroll-close" onclick="jQuery(this).parent().hide();return false;">&times;</a><div class="mejs-postroll-layer-content"></div></div>').prependTo(s).hide(),a.media.addEventListener("ended",function(){s.find(".mejs-postroll-layer-content").html(e(l).html()),t.postroll.show()},!1))}})},createAuxControls:function(){var e=this,t='<div class="vm-aux-controls"><a class="vm-prev-track" title="Play Previous Item"></a><a class="vm-next-track active" title="Play Next Item"></a><a class="vm-repeat" title="Repeat Playlist"></a><a class="vm-shuffle" title="Shuffle Playlist"></a><a class="vm-show-playlist active" title="Show/hide playlist"></a><a class="vm-make-fullscreen" title="Make the player fullscreen"></a><a class="vm-lights active" title="Turn lights on/off"></a><a class="vm-search" title="Search to filter items"></a></div><div class="vm-search-box"><input type="text" placeholder="Type to filter items &hellip;" /></div>';e.$player.after(t),e.$prevTrack=e.$app.find("a.vm-prev-track"),e.$nextTrack=e.$app.find("a.vm-next-track"),e.$repeat=e.$app.find("a.vm-repeat"),e.$shuffle=e.$app.find("a.vm-shuffle"),e.$showPlaylist=e.$app.find("a.vm-show-playlist"),e.$makeFullscreen=e.$app.find("a.vm-make-fullscreen"),e.$lights=e.$app.find("a.vm-lights"),e.$search=e.$app.find("a.vm-search"),e.$searchBox=e.$app.find("div.vm-search-box"),e.options.showAuxControls||e.$app.find("div.vm-aux-controls").hide()},detectMobile:function(){return e.ajax({url:this.options.phpFolder+"/mobile.php",dataType:"text"})},getPlaylistJSON:function(){var i=this,s="",a="";if(i.options.youtubeFeed){if(!i.options.youtubeAPIKey)throw new Error("Youtube API key not provided");var l=i.options.youtubeOptions;s="https://www.googleapis.com/youtube/v3/","user"===l.source?s+="channels/?part=contentDetails&forUsername="+l.userID:"playlist"===l.source?s+="playlistItems/?playlistId="+l.playlistID+"&part=contentDetails":"search"===l.source&&(s+="search?q="+l.search+"&part=snippet"),s+="&maxResults="+l.limit+"&key="+i.options.youtubeAPIKey+"&callback=?"}else if(i.options.vimeoFeed){var o=i.options.vimeoOptions;s="https://vimeo.com/api/v2/","user"===o.source?s+=o.userID+"/videos.json":"album"===o.source?s+="album/"+o.albumID+"/videos.json":"channel"===o.source&&(s+="channel/"+o.channelID+"/videos.json"),s+="?callback=?"}else if(i.options.dailymotionFeed){var n=i.options.dailymotionOptions;s="https://api.dailymotion.com/","user"===n.source?s+="user/"+n.userID:"playlist"===n.source?s+="playlist/"+n.playlistID:"group"===n.source?s+="group/"+n.groupID:"channel"===n.source&&(s+="channel/"+n.channelID),s+="/videos?fields=duration,title,thumbnail_120_url,tiny_url&limit="+n.limit+"&callback=?"}else if(i.options.scanMP3Folder||i.options.scanVideoFolder){if(a=i.options.scanMP3Folder?i.options.mp3Folder:i.options.videoFolder,s=i.options.phpFolder+(i.options.scanMP3Folder?"/get-mp3.php":"/get-videos.php"),-1===a.indexOf("http")){var r=t.createElement("a");r.href=a,a=r.href}}else s=i.options.playlistURL;if(i.options.scanMP3Folder||i.options.scanVideoFolder)return e.getJSON(s,{folder:a});if(i.options.youtubeFeed&&"user"===i.options.youtubeOptions.source){var p=e.Deferred();return e.getJSON(s,function(t){var s=t.items[0].contentDetails.relatedPlaylists.uploads;e.getJSON("https://www.googleapis.com/youtube/v3/playlistItems?key="+i.options.youtubeAPIKey+"&part=contentDetails&playlistId="+s+"&maxResults="+l.limit+"&callback=?",function(e){p.resolve(e)})}),p}return e.getJSON(s)},getCache:function(){var t=e.ajax({type:"post",data:{interval:this.options.cacheInterval,cacheFile:this.options.cacheFileName},url:this.options.cacheFolder+"/get-cache.php",dataType:"json",global:!1});return t},updateCache:function(t){e.ajax({type:"post",data:{playlist:JSON.stringify(t),cacheFile:this.options.cacheFileName},url:this.options.cacheFolder+"/update-cache.php",dataType:"json",global:!1})},getPlaylistData:function(){var t,i=this;i.options.detectMobile?t=i.detectMobile():(t=e.Deferred(),t.resolve("false"),i.isMobile=!1),t.done(function(t){if("true"===t&&(i.isMobile=!0),i.options.enableCache)var s=i.getCache();else{var s=e.Deferred();s.resolve({expired:!0})}s.done(function(e){if(e.expired)if(i.options.playlistURL){var t=i.getPlaylistJSON();!i.options.youtubeFeed&&!i.options.vimeoFeed&&!i.options.dailymotionFeed&&i.options.getID3Info||i.options.scanMP3Folder?t.done(function(e){i.setMediaInfo(e)}):t.done(function(e){i.playlistLoaded(e)})}else i.options.getID3Info?i.setMediaInfo(i.options.playlistData):i.playlistLoaded(i.options.playlistData);else i.playlist=e,i.processPlaylist()})})},setMediaInfo:function(i,s){var a,l=this,o=[],n=t.createElement("a");l.options.scanMP3Folder||l.options.scanVideoFolder||e.each(i,function(e){"audio"===i[e].type&&-1===i[e].mp3.indexOf("http")&&(n.href=i[e].mp3,i[e].mp3=n.href),"video"===i[e].type&&-1===i[e].mp4.indexOf("http")&&(n.href=i[e].mp4,i[e].mp4=n.href)}),e.ajax({url:l.options.phpFolder+"/media-info.php",data:{json:JSON.stringify(i)},dataType:"json",type:"post",success:function(t){a=t,o=e.map(a,function(t,i){if("audio"===a[i].type&&a[i].searchTerm){var s=e.ajax({url:"https://itunes.apple.com/search",data:{term:a[i].searchTerm,media:"music",entity:"album",limit:1},dataType:"jsonp",success:function(e){if("undefined"!=typeof e.results[0]){var t=e.results[0].artworkUrl100;t=t.replace("100x100","600x600"),a[i].poster=t}}});return s}}),e.when.apply(e,o).done(function(){l.playlistLoaded(a,s)})}})},playlistLoaded:function(t,i){var s=this,a=[];if(s.options.youtubeFeed&&!i){var l=[],o=e.Deferred();"search"===s.options.youtubeOptions.source?e.each(t.items,function(){l.push(this.id.videoId)}):e.each(t.items,function(){l.push(this.contentDetails.videoId)}),e.getJSON("https://www.googleapis.com/youtube/v3/videos/?key="+s.options.youtubeAPIKey+"&id="+l.join(",")+"&part=snippet,contentDetails&callback=?",function(t){e.each(t.items,function(e){s.maxIdValue=e,s.playlist[e]={},s.playlist[e].id=e,s.playlist[e].title=this.snippet.title,s.playlist[e].description=this.snippet.description,s.playlist[e].type="youtube",s.playlist[e].link="https://www.youtube.com/watch?v="+this.id,s.playlist[e].duration=s.formatDuration(s.parseYoutubeDuration(this.contentDetails.duration)),s.playlist[e].poster=this.snippet.thumbnails["default"].url}),o.resolve()}),a.push(o)}else if(s.options.vimeoFeed&&!i){var o=e.Deferred();e.each(t,function(e){return s.maxIdValue=e,s.playlist[e]={},s.playlist[e].id=e,s.playlist[e].title=this.title,s.playlist[e].description=this.description.replace(/(<([^>]+)>)/gi,""),s.playlist[e].type="vimeo",s.playlist[e].link=this.url,s.playlist[e].duration=s.formatDuration(this.duration),s.playlist[e].poster=this.thumbnail_medium,e===s.options.vimeoOptions.limit-1?!1:void 0}),o.resolve(),a.push(o)}else if(s.options.dailymotionFeed&&!i){var o=e.Deferred();e.each(t.list,function(e){s.maxIdValue=e,s.playlist[e]={},s.playlist[e].id=e,s.playlist[e].title=this.title,s.playlist[e].type="dailymotion",s.playlist[e].link=this.tiny_url,s.playlist[e].duration=s.formatDuration(this.duration),s.playlist[e].poster=this.thumbnail_120_url}),o.resolve(),a.push(o)}else a=[],e.each(t,function(i){var l=e.Deferred();if(s.maxIdValue++,t[i].id=s.maxIdValue,"youtube"===t[i].type){if(!s.options.youtubeAPIKey)throw new Error("Youtube API key not provided");var o=t[i].link.split("v=")[1],n="https://www.googleapis.com/youtube/v3/videos/?key="+s.options.youtubeAPIKey+"&id="+o+"&part=snippet,contentDetails&callback=?";e.getJSON(n,function(e){t[i].duration=s.formatDuration(s.parseYoutubeDuration(e.items[0].contentDetails.duration)),t[i].poster=e.items[0].snippet.thumbnails["default"].url,t[i].title||(t[i].title=e.items[0].snippet.title),l.resolve()})}else if("vimeo"===t[i].type){var o=t[i].link.split("/").pop(),n="https://vimeo.com/api/v2/video/"+o+".json?callback=?";e.getJSON(n,function(e){t[i].duration=s.formatDuration(e[0].duration),t[i].poster=e[0].thumbnail_medium,t[i].title||(t[i].title=e[0].title),l.resolve()})}else if("dailymotion"===t[i].type){var o=t[i].link.split("/").pop(),n="https://api.dailymotion.com/video/"+o+"?fields=duration,thumbnail_120_url,title&callback=?";e.getJSON(n,function(e){t[i].duration=s.formatDuration(e.duration),t[i].poster=e.thumbnail_120_url,t[i].title||(t[i].title=e.title),l.resolve()})}else if("video"===t[i].type){var r=s.isMobile?t[i].mobileMp4:t[i].mp4;if(s.options.getID3Info)l.resolve();else if(s.isiOS||s.isAndroid||s.isIE8)t[i].duration="0:00",l.resolve();else{var p=e('<video id="vm-test-video-'+i+'" class="vm-test-video" preload="metadata" src="'+r+'">').appendTo("body");new MediaElement("vm-test-video-"+i,{success:function(a){a.addEventListener("loadedmetadata",function(){t[i].duration=s.formatDuration(a.duration),l.resolve(),p.remove(),"native"!==a.pluginType&&e("#"+a.pluginElement.id).remove(),e("#"+a.id+"_container").remove()})}})}}else if("audio"===t[i].type){var r=t[i].mp3,d="";if(d=t[i].artist?t[i].track+" - "+t[i].artist:t[i].track?t[i].track:t[i].mp3.split("/").pop().split(".")[0],t[i].title=d,s.options.getID3Info)l.resolve();else if(s.isiOS||s.isAndroid||s.isIE8)t[i].duration="0:00",l.resolve();else{var c=e('<audio id="vm-test-audio-'+i+'" class="vm-test-audio" preload="metadata" src="'+r+'">').appendTo("body");new MediaElement("vm-test-audio-"+i,{success:function(a){a.addEventListener("loadedmetadata",function(){t[i].duration=s.formatDuration(a.duration),l.resolve(),c.remove(),"native"!==a.pluginType&&e("#"+a.pluginElement.id).remove(),e("#"+a.id+"_container").remove()})}})}}else"radio"===t[i].type&&(s.options.pullRadioStreamCover?s.getStreamInfo(t[i]).done(function(e){"new"===e.status&&(t[i].poster=e.cover),l.resolve()}):l.resolve(),t[i].duration="0:00",t[i].track="");a.push(l)});e.when.apply(e,a).done(function(){i?(Array.prototype.push.apply(s.playlist,t),s.setupPlaylist(i)):(s.options.youtubeFeed||s.options.vimeoFeed||s.options.dailymotionFeed||(s.playlist=t),s.options.enableCache&&s.updateCache(s.playlist),s.processPlaylist())})},processPlaylist:function(){var e=this;e.options.reversePlaylistOrder&&e.playlist.reverse(),e.setupPlaylist(),e.options.fixPlayerOnScroll&&"bottom"===e.options.playlistPosition&&!e.hasTouch&&e.setupStageLock(),e.$playlist.children("li").eq(0).find("span.title").trigger(e.clickEventType),e.options.enablePlaylistSort&&e.makePlaylistSortable(),"bottom"===e.options.playlistPosition&&"auto"!==e.bottomPlaylistMaxHeight&&e.$playlist.css("max-height",e.options.bottomPlaylistMaxHeight),e.$window.trigger("resize.vimuse"+e.vmId),e.$stage.removeClass("loading"),e.$playlist.filter(".custom-scrollbar").perfectScrollbar({minScrollbarLength:20,suppressScrollX:!0}),e.onSetup()},makePlaylistSortable:function(){var t=this;t.$playlist.sortable({axis:"y",cancel:"a",containment:"parent",cursor:"move",items:"> li",revert:400,helper:"clone",placeholder:"item-holder",stop:function(){t.hasTouch&&t.$playlist.sortable("disable").children("li").removeClass("selected")}}),t.hasTouch&&(t.$playlist.sortable("disable"),t.$app.hammer({swipeVelocityY:.3,dragMinDistance:60}).on("swipeup swipedown",".vm-playlist",function(){t.$playlist.sortable("disable")}).on("tap",".vm-playlist li",function(){t.$playlist.sortable("enable"),e(this).addClass("selected")}))},formatDuration:function(e){e=parseInt(e,10);var t=parseInt(e/3600,10)%24,i=parseInt(e/60,10)%60,s=e%60,a="";return a=t>0?t+":"+(10>i?"0"+i:i)+":"+(10>s?"0"+s:s):i+":"+(10>s?"0"+s:s)},parseYoutubeDuration:function(e){var t=e.match(/[0-9]+[HMS]/g),i=0;return t.forEach(function(e){var t=e.charAt(e.length-1),s=parseInt(e.slice(0,-1),10);switch(t){case"H":i+=60*s*60;break;case"M":i+=60*s;break;case"S":i+=s}}),i},setupPlaylist:function(e){for(var t=this,i="",s=t.$playlist.children("li"),a=t.playlist.length,l=s.not(".loading").length,o=t.options.showFileTypeIcons?"":"no-icons",n=t.options.showPlaylistThumbs?" show-thumb":"",r=l;a>r;r++){if(i+='<li class="'+o+n+'" data-type="'+t.playlist[r].type+'" data-id="'+t.playlist[r].id+'">',i+=t.options.showPlaylistThumbs?'<span class="item-thumb"><img src="'+t.playlist[r].poster+'" alt=""></span>':"",i+='<span class="title">'+t.playlist[r].title+"</span>",i+=t.options.showItemDuration?'<span class="duration">'+t.playlist[r].duration+"</span>":"",i+=t.options.showDeleteButtons?'<a class="delete"></a>':"",t.options.showLyricsLinks&&t.playlist[r].lyrics&&(i+='<a class="lyrics" href="'+t.playlist[r].lyrics+'" download="'+t.playlist[r].lyrics.split("/").pop()+'" title="Download the lyrics of this song"></a>'),t.options.showDownloadLinks&&t.playlist[r].free!==!1){var p=t.playlist[r].downloadName;"video"===t.playlist[r].type?((void 0===p||""==p)&&(p=t.playlist[r].mp4.split("/").pop()),i+='<a class="free-media '+t.playlist[r].type+'" href="'+t.playlist[r].mp4+'" download="'+p+'" title="Download mp4 version of this video"></a>'):"audio"===t.playlist[r].type&&((void 0===p||""==p)&&(p=t.playlist[r].mp3.split("/").pop()),i+='<a class="free-media '+t.playlist[r].type+'" href="'+t.playlist[r].mp3+'" download="'+p+'" title="Download mp3 version of this audio"></a>')}t.options.showPurchaseLinks&&t.playlist[r].purchase&&(i+='<a class="purchase" href="'+t.playlist[r].purchase+'" title="Visit page to purchase item"',i+=t.options.newWindowPurchaseLinks?' target="_blank">':">",i+="</a>"),t.options.showURLLinks&&t.playlist[r].url&&(i+='<a class="link" href="'+t.playlist[r].url+'" title="Visit page"',i+=t.options.newWindowURLLinks?' target="_blank">':">",i+="</a>"),i+="</li>"}e?(t.$playlist.children("li").last().after(i).end().filter(".loading").remove(),t.$playlist.sortable("refresh"),t.checkTrackIndex(),t.resizeItemTitle(),t.onItemsAppended()):t.$playlist.html(i)},getPlaylistItem:function(t){return e.grep(this.playlist,function(e){return e.id===t})[0]},getPlaylistItemIndex:function(e){for(var t=this,i=-1,s=t.playlist.length;s--;)if(e===t.playlist[s].id){i=s;break}return i},createPlayer:function(t,i){var s,a=this,l=a.$playlist.children("li"),o=l.index(l.filter("li.current"));if(0!==o&&(a.options.autoplayOnPlayerLoad=!0),"video"===t.type){var n=a.isMobile?t.mobileMp4:t.mp4;s='<video preload="metadata" width="640" height="360" poster="'+t.poster+'" style="width: 100%;">',s+='<source type="video/mp4" src="'+n+'" />',t.webm&&(s+='<source type="video/webm" src="'+t.webm+'" />'),t.ogv&&(s+='<source type="video/ogg" src="'+t.ogv+'" />'),t.subtitle&&e.each(t.subtitle,function(){s+='<track kind="subtitles" src="'+this.file+'" srclang="'+this.lang+'" />'}),t.postroll&&(s+='<link rel="postroll" href="#vm-postroll-'+a.vmID+'" />',a.$postrollContainer.html(t.postroll)),s+="</video>"}else if("youtube"===t.type)s=a.isiOS||a.isAndroid?'<video controls preload="none" width="640" height="360" style="width: 100%;">':'<video controls preload="none" width="640" height="360" style="max-width: 100%;">',s+='<source type="video/youtube" src="'+t.link+'" />',s+="</video>";else if("vimeo"===t.type){var r=t.link.split("/").pop(),p=a.options.autoplay?"&autoplay=1":"";p=a.options.autoplayOnPlayerLoad||0!==o?p:"",s='<iframe src="https://player.vimeo.com/video/'+r+"?api=1&player_id="+r+p+'" width="640" height="360" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>'}else if("dailymotion"===t.type){var r=t.link.split("/").pop(),p=a.options.autoplay?"&autoplay=1":"",d=a.options.dailymotionSyndication?"&syndication="+a.options.dailymotionSyndication:"";p=a.options.autoplayOnPlayerLoad||0!==o?p:"",s='<iframe src="https://www.dailymotion.com/embed/video/'+r+"?api=postMessage"+p+d+'" width="640" height="360" frameborder="0" allowfullscreen></iframe>'}else if("radio"===t.type){var c=t.link+"?nocache="+Math.floor(1e4*Math.random());s='<audio controls type="audio/mpeg" width="640" style="width: 100%" src="'+c+'"></audio>'}else s='<audio controls width="640" style="width: 100%">',s+='<source type="audio/mpeg" src="'+t.mp3+'" />',t.ogg&&(s+='<source type="audio/ogg" src="'+t.ogg+'" />'),s+="</audio>";if(a.$stage.height(a.$stage.height()),a.$player.removeClass().addClass("vm-player"),"youtube"===t.type?a.$player.addClass("video"):a.$player.addClass(t.type),"audio"===t.type||"radio"===t.type){var u=a.$audioPoster.children("img")[0];a.$audioPoster.show().addClass("img-loading"),u.src=t.poster,u.complete?a.$audioPoster.removeClass("img-loading"):u.onload=function(){a.$audioPoster.removeClass("img-loading")},"audio"===a.options.mediaType&&(a.$audioInfo.children("p.track").html(t.track),a.$audioInfo.children("p.artist").html(t.artist),a.$audioInfo.children("p.album").html(t.album))}else a.$audioPoster.hide();"audio"!==a.options.mediaType&&a.options.showCurrentItemInfo&&(a.$currentInfo.html(t.title).css("display","block"),setTimeout(function(){a.$currentInfo.css("display","")},2e3)),a.player&&((a.isAndroid||a.isiOS)&&"youtube"===a.player.media.pluginType||"native"!==a.player.media.pluginType&&a.player.media.pluginElement&&e("#"+a.player.media.pluginElement.id).parent().remove(),a.$player.empty(),clearInterval(a.radioStreamInterval),delete mejs.players[a.player.id],a.player.globalUnbind(),a.player=null),a.$window.off("message.vimuse"+a.vmID),a.$player.hasClass("video")&&a.isChrome&&a.$stage.css("overflow","hidden"),a.$player.html(s).not(".vimeo, .dailymotion").children().mediaelementplayer({hideVolumeOnTouchDevices:!!a.isAndroid,alwaysShowControls:a.isiOS,startVolume:a.options.volume,enablePluginSmoothing:!0,iPadUseNativeControls:"youtube"===t.type,iPhoneUseNativeControls:"youtube"===t.type,AndroidUseNativeControls:"youtube"===t.type,startLanguage:a.options.startLanguage,mode:a.isChrome&&!a.isiOS&&!a.isAndroid||"radio"===t.type&&a.isOpera?"shim":"auto",features:"radio"===t.type?["playpause","current","volume"]:["playpause","current","progress","duration","tracks","volume","fullscreen","vmpostroll"],success:function(e,s,l){if(a.player=l,a.$stage.css("height","auto"),(a.isiOS||a.isAndroid)&&"youtube"===t.type){var n=a.$player.find("iframe").attr("src");n=n.replace("controls=0","controls=1"),a.$player.find("iframe").attr("src",n)}a.$player.hasClass("video")&&setTimeout(function(){var e=a.$player.width(),t=.5625*e;l.setPlayerSize(e,t),l.setControlsSize(),!a.isiOS&&!a.isAndroid&&a.player.media.setVideoSize(e,t),a.isChrome&&a.$stage.css("overflow","")},50),a.ie9js&&IE7.recalc(),i=a.options.autoplayOnPlayerLoad||0!==o?i:!1,i&&("youtube"===t.type?"youtube"===e.pluginType?e.play():e.addEventListener("canplay",function(){l.play()},!1):e.play()),"radio"===t.type&&a.options.pullRadioTrackInfo&&(a.changeRadioInfo(t),a.radioStreamInterval=setInterval(function(){a.changeRadioInfo(t)},a.options.radioInfoPollInterval)),e.addEventListener("play",a.started.bind(a),!1),e.addEventListener("pause",a.paused.bind(a),!1),e.addEventListener("timeupdate",a.timeupdate.bind(a),!1),e.addEventListener("ended",a.finishedPlaying.bind(a),!1)}}),a.$player.hasClass("vimeo")?(a.$stage.css("height","auto"),a.$window.on("message.vimuse"+a.vmId,a.vimeoMsgReceived.bind(a))):a.$player.hasClass("dailymotion")&&(a.$stage.css("height","auto"),a.$window.on("message.vimuse"+a.vmId,a.dailymotionMsgReceived.bind(a)))},changeRadioInfo:function(e){var t=this,i=t.getPlaylistItemIndex(t.curItemId),s=t.getStreamInfo(e);s.done(function(s){if("new"===s.status){var a=t.playlist[i].title+" - "+s.track,l=s.cover;t.playlist[i].track=s.track,"audio"===t.options.mediaType&&t.$audioInfo.children("p.track").html(s.track),t.$playlist.find("li.current span.title").text(a),t.$currentInfo.html(a),t.options.pullRadioStreamCover?(t.playlist[i].poster=l,t.$playlist.find("li.current img")[0].src=l,t.$audioPoster.children("img")[0].src=l):t.$audioPoster.children("img")[0].src=e.poster}else"same"===s.status?t.$currentInfo.html(t.playlist[i].title+" - "+t.playlist[i].track):"locked"===s.status&&clearInterval(t.radioStreamInterval)})},getStreamInfo:function(t){var i=e("<a>",{href:t.link})[0];return e.ajax({url:this.options.phpFolder+"/stream-info.php",cache:!1,data:{protocol:i.protocol,rootUrl:i.host,path:i.pathname,type:t.radioType,track:t.track,pullCover:this.options.pullRadioStreamCover},dataType:"json",global:!1})},vimeoMsgReceived:function(e){var t=JSON.parse(e.originalEvent.data),i=this.$player.find("iframe"),s=i.attr("src").split("?")[0];if("ready"===t.event){var a={method:"addEventListener",value:"finish"};i[0].contentWindow.postMessage(JSON.stringify(a),s)}else"finish"===t.event&&this.finishedPlaying()},dailymotionMsgReceived:function(e){var t=e.originalEvent.data.split("=").pop();"ended"===t&&this.finishedPlaying()},finishedPlaying:function(){var e=this,t=e.$playlist.children("li"),i=t.index(t.filter("li.current"));if(e.ended(),e.options.playlistProgress)if(e.shuffleEnabled){var s=t.not(".played"),a=Math.floor(Math.random()*s.length);if(0===s.length)return!1;!a&&(a=0),i=a,s.eq(i).find("span.title").trigger(e.clickEventType)}else if(e.loopEnabled&&e.$repeat.hasClass("one"))e.player.play();else if(i===t.length-1){if(!e.loopEnabled||e.$repeat.hasClass("one"))return!1;t.removeClass("played").eq(0).find("span.title").trigger(e.clickEventType)}else t.eq(++i).find("span.title").trigger(e.clickEventType)},resizeItemTitle:function(){var t=this;"bottom"!==t.options.playlistPosition&&!t.$playlist.hasClass("no-float")&&t.options.showPlaylistThumbs?t.$playlist.find("span.title").css("width",""):(t.$playlist.is(":hidden")&&t.$playlist.addClass("resizing"),t.$playlist.children("li").each(function(){var t=e(this),i=t.width(),s=t.children("a.free-media").outerWidth(!0),a=t.children("a.link").outerWidth(!0),l=t.children("a.purchase").outerWidth(!0),o=t.children("a.lyrics").outerWidth(!0),n=t.children("span.duration").outerWidth(!0),r=t.children("a.delete").outerWidth(!0),p=i-a-l-s-o-r-n-20;t.children("span.title").outerWidth(p)}),t.$playlist.removeClass("resizing"))},setLayout:function(){var e=this;if(e.$app.parent().width()<630?(e.$stage.add(e.$playlist).addClass("no-float"),e.$app.addClass("one-col"),e.$playlist.css("max-height",e.options.bottomPlaylistMaxHeight),e.resizeItemTitle()):t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?(e.$stage.add(e.$playlist).addClass("no-float"),e.$playlist.css("max-height",e.options.bottomPlaylistMaxHeight),e.resizeItemTitle()):(e.$stage.add(e.$playlist).removeClass("no-float"),e.$app.removeClass("one-col"),"bottom"!==e.options.playlistPosition&&e.$playlist.css("max-height",""),e.resizeItemTitle()),e.$player.hasClass("video")&&e.player){var i=e.player.container.hasClass("mejs-container-fullscreen")?e.player.container.width():e.$player.width(),s=.5625*i;e.player.setPlayerSize(i,s),e.player.setControlsSize(),!e.isiOS&&!e.isAndroid&&e.player.media.setVideoSize(i,s)}},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in t)return"hidden";for(var i=0;i<e.length;i++)if(e[i]+"Hidden"in t)return e[i]+"Hidden";return null},isPageHidden:function(){var e=this.getHiddenProp();return e?t[e]:!1},pageVisChange:function(){this.isPageHidden()&&this.player&&this.player.pause()},playItem:function(t){var i=t.data.self,s=e(this).closest("li"),a=i.$playlist.children("li");if(!s.hasClass("current")){i.$playlist.hasClass("searching")&&(i.$searchBox.slideUp(400).find("input").val(""),i.$playlist.removeClass("searching"),a.removeClass("filtered first last").slideDown(400)),i.curItemId=s.data("id");var l=i.getPlaylistItem(i.curItemId);a.removeClass("current"),s.addClass("current played"),i.checkTrackIndex(),a.promise().done(function(){i.scrollPlaylist(s)}),i.createPlayer(l,i.options.autoplay),i.onItemChange()}},nextTrack:function(){var e=this,t=e.$playlist.children("li"),i=t.index(t.filter("li.current"));return i===t.length-1?!1:void t.eq(++i).find("span.title").trigger(e.clickEventType)},prevTrack:function(){var e=this,t=e.$playlist.children("li"),i=t.index(t.filter("li.current"));return 0===i?!1:void t.eq(--i).find("span.title").trigger(e.clickEventType)},checkTrackIndex:function(){var e=this,t=e.$playlist.children("li"),i=t.index(t.filter("li.current"));0===i?(e.$prevTrack.removeClass("active"),e.$nextTrack.addClass("active")):i===t.length-1?(e.$prevTrack.addClass("active"),e.$nextTrack.removeClass("active")):(e.$prevTrack.addClass("active"),e.$nextTrack.addClass("active"))},scrollPlaylist:function(e){var t=this,i=t.$playlist.innerHeight(),s=e.outerHeight(),a=parseInt(i/s,10),l=t.$playlist.scrollTop(),o=t.$playlist.children("li").index(e),n=(o+1-a)*s;(n>=l||l/s>o)&&t.$playlist.animate({scrollTop:n},400,function(){t.$playlist.hasClass("custom-scrollbar")&&t.$playlist.perfectScrollbar("update")})},repeatTrack:function(){var e=this;e.$repeat.hasClass("one")?(e.loopEnabled=!1,e.$repeat.removeClass("active one").attr("title","Repeat Playlist")):e.$repeat.hasClass("active")?e.$repeat.addClass("one").attr("title","Deactivate Repeat"):(e.loopEnabled=!0,e.$repeat.addClass("active").attr("title","Repeat Current Item"))},shufflePlaylist:function(){var e=this;e.shuffleEnabled=!e.shuffleEnabled,e.shuffleEnabled?e.$shuffle.addClass("active"):e.$shuffle.removeClass("active")},showPlaylist:function(){var e=this;if(e.$showPlaylist.hasClass("active"))"bottom"===e.options.playlistPosition||e.$playlist.hasClass("no-float")?e.$playlist.slideUp(600):(e.$playlist.animate({width:0},400),e.$stage.animate({width:e.$app.width()},400,function(){if(e.$playlist.css({display:"none",width:""}),e.$stage.css({width:"100%",margin:"auto","float":"none"}),e.$player.hasClass("video")){var t=e.$player.width(),i=.5625*t;e.player.setPlayerSize(t,i),e.player.setControlsSize()}})),e.$showPlaylist.removeClass("active");else{if("bottom"===e.options.playlistPosition||e.$playlist.hasClass("no-float"))e.$playlist.slideDown(600),e.$stage.css({width:"",margin:"","float":""});else{var t="audio"===e.options.mediaType?.4444:.3333;e.$playlist.css({display:"block",width:0}).animate({width:e.$app.width()*t},400),e.$stage.css({margin:"","float":""}),e.$stage.animate({width:(1-t)*e.$app.width()},400,function(){if(e.$playlist.add(e.$stage).css("width",""),e.$player.hasClass("video")){var t=e.$player.width(),i=.5625*t;e.player.setPlayerSize(t,i),e.player.setControlsSize()}})}e.$showPlaylist.addClass("active")}},setupStageLock:function(){var e,t=this;t.lockset=!1,t.$window.on("scroll.vimuse"+t.vmId,function(){e&&clearTimeout(e),e=setTimeout(function(){t.fixStage()},10)})},fixStage:function(){var e=this,t=e.$stage.outerHeight(),i=e.$app.outerHeight(),s=e.$app.offset().top,a=s-e.options.playerFixOffset,l=a+(i-t),o=e.$window.height()-e.options.playerFixOffset,n=e.$window.scrollTop();t>=o||i===t?(e.$stage.removeClass("fixed scroll-end").css({left:"",top:"",width:""}),e.$app.css("padding-top",""),e.lockset=!1):!e.lockset&&n>a&&l>n?(e.$app.css("padding-top",e.$stage.outerHeight(!0)),e.$stage.css({left:e.$stage.offset().left,top:e.options.playerFixOffset,width:e.$stage.width()}).addClass("fixed").removeClass("scroll-end"),e.lockset=!0):(e.lockset&&(a>=n||n>=l)||n>=l)&&(e.$stage.removeClass("fixed").css({left:"",top:"",width:""}),n>l?e.$stage.addClass("scroll-end"):e.$app.css("padding-top",""),e.lockset=!1)},handleFullscreen:function(){var e=this;e.$makeFullscreen.hasClass("active")||t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement?(t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),e.$makeFullscreen.removeClass("active")):(e.$app[0].requestFullscreen?e.$app[0].requestFullscreen():e.$app[0].mozRequestFullScreen?e.$app[0].mozRequestFullScreen():e.$app[0].webkitRequestFullscreen?e.$app[0].webkitRequestFullscreen():e.$app[0].msRequestFullscreen&&e.$app[0].msRequestFullscreen(),e.$makeFullscreen.addClass("active"))},handleLights:function(){var e=this;e.$lights.toggleClass("active"),e.$overlay.fadeToggle(600);var t=e.$lights.hasClass("active")?600:0;setTimeout(function(){e.$app.toggleClass("lights-off")},t)},showSearchBox:function(){var e=this;e.$searchBox.slideToggle(400),e.$playlist.toggleClass("searching"),e.$playlist.hasClass("searching")||(e.$playlist.children("li").removeClass("filtered").slideDown(400),e.$searchBox.find("input").val(""))},deleteItem:function(t){var i=this,s=e(t.target).closest("li"),a=s.data("id"),l=!1;s.slideUp(400,function(){if(s.hasClass("current")&&(i.player.pause(),l=0===s.next("li").length?s.prev("li").find("span.title"):s.next("li").find("span.title")),
s.remove(),i.playlist=e.grep(i.playlist,function(e){return e.id!==a}),l)l.trigger(i.clickEventType),i.$playlist.animate({scrollTop:i.$playlist.scrollTop()-l.outerHeight()},400,function(){i.$playlist.hasClass("custom-scrollbar")&&i.$playlist.perfectScrollbar("update")});else{i.checkTrackIndex();var t=i.$playlist.scrollTop()+i.$playlist.innerHeight()>=i.$playlist[0].scrollHeight?i.$playlist.children("li").last():!1;t?i.$playlist.animate({scrollTop:i.$playlist.scrollTop()-t.outerHeight()},400,function(){i.$playlist.hasClass("custom-scrollbar")&&i.$playlist.perfectScrollbar("update")}):i.$playlist.hasClass("custom-scrollbar")&&i.$playlist.perfectScrollbar("update")}})},filterPlaylist:function(){var t=this,i=t.$playlist.children("li"),s=e.trim(t.$searchBox.find("input").val().toLowerCase());if(s){var a=t.$playlist.find("span.title").filter(":contains("+s+")").closest("li").addClass("filtered").slideDown(400);i.not(a).removeClass("filtered").slideUp(400),a.removeClass("first last").first().addClass("first").end().last().addClass("last")}else i.removeClass("filtered first last").slideDown(400);i.promise().done(function(){t.$playlist.scrollTop(0),t.$playlist.hasClass("custom-scrollbar")&&t.$playlist.perfectScrollbar("update")})},bindEvents:function(){var e=this;e.$playlist.hammer().on(e.clickEventType,"span.title, span.item-thumb",{self:e},e.playItem),e.$window.on("resize.vimuse"+e.vmId+" orientationchange.vimuse"+e.vmId,e.setLayout.bind(e));var i=this.getHiddenProp();if(this.options.stopPlaybackOnPageHide&&i){var s=i.replace(/[H|h]idden/,"")+"visibilitychange";t.addEventListener(s,this.pageVisChange.bind(e))}e.$nextTrack.hammer().on(e.clickEventType,e.nextTrack.bind(e)),e.$prevTrack.hammer().on(e.clickEventType,e.prevTrack.bind(e)),e.$repeat.hammer().on(e.clickEventType,e.repeatTrack.bind(e)),e.$shuffle.hammer().on(e.clickEventType,e.shufflePlaylist.bind(e)),e.$playlist.hammer().on(e.clickEventType,"a.delete",e.deleteItem.bind(e)),e.$showPlaylist.hammer().on(e.clickEventType,e.showPlaylist.bind(e)),e.$makeFullscreen.hammer().on(e.clickEventType,e.handleFullscreen.bind(e)),e.$window.on("fullscreenchange.vimuse"+e.vmId+" mozfullscreenchange.vimuse"+e.vmId+" webkitfullscreenchange.vimuse"+e.vmId+" MSFullscreenChange.vimuse"+e.vmId,function(){null!==t.fullscreenElement&&null!==t.mozFullScreenElement&&null!==t.webkitFullscreenElement&&null!==t.msFullscreenElement||e.$makeFullscreen.removeClass("active")}),e.$lights.hammer().on(e.clickEventType,e.handleLights.bind(e)),e.$search.hammer().on(e.clickEventType,e.showSearchBox.bind(e)),e.$searchBox.find("input").keyup(e.filterPlaylist.bind(e))},playerAPI:function(){var t=this;return{next:function(){t.$nextTrack.trigger(t.clickEventType)},prev:function(){t.$prevTrack.trigger(t.clickEventType)},play:function(){t.player&&t.player.play()},pause:function(){t.player&&t.player.pause()},gotoItem:function(e){t.$playlist.children("li").eq(parseInt(e,10)).find("span.title").trigger(t.clickEventType)},gotoFirstItem:function(){t.$playlist.children("li").eq(0).find("span.title").trigger(t.clickEventType)},gotoLastItem:function(){t.$playlist.children("li").last().find("span.title").trigger(t.clickEventType)},getPlaylistLength:function(){return t.$playlist.children("li").length},currentItemIndex:function(){return t.$playlist.children("li").index(t.$playlist.children("li.current"))},seek:function(e){t.player.setCurrentTime(parseInt(e,10))},currentTime:function(){return t.player.getCurrentTime()},getVolume:function(){return t.player.getVolume()},setVolume:function(e){var i=parseFloat(e,10);t.player.setVolume(i),t.options.volume=i},destroy:function(){t.options.enablePlaylistSort&&t.$playlist.sortable("destroy"),t.$playlist.filter(".custom-scrollbar").perfectScrollbar("destroy"),t.player&&("native"!==t.player.media.pluginType&&t.player.media.pluginElement&&e("#"+t.player.media.pluginElement.id).parent().remove(),t.$player.empty(),clearInterval(t.radioStreamInterval),delete mejs.players[t.player.id],t.player.globalUnbind(),t.player=null),t.$window.off(".vimuse"+t.vmId),t.$app.empty().off("started paused timeupdate ended onItemChange onSetup").removeData("vimuse").removeClass("vm-container playlist-"+t.options.playlistPosition+" cf one-col no-track-info no-cover no-audio-details only-audio"),t.$overlay.remove(),t.$postrollContainer.remove()},appendItems:function(e){for(var i=e.length,s=t.options.showPlaylistThumbs?" show-thumb":"",a="",l=0;i>l;l++)a+='<li class="loading'+s+'"></li>';t.$playlist.children("li").last().after(a),t.$playlist.hasClass("custom-scrollbar")&&t.$playlist.perfectScrollbar("update"),t.$playlist.animate({scrollTop:t.$playlist[0].scrollTop+t.$playlist.children("li.loading").eq(0).position().top},400),t.options.getID3Info?t.setMediaInfo(e,!0):t.playlistLoaded(e,!0)}}},started:function(){var e=this;e.isiOS&&e.$player.find("div.mejs-fullscreen-button").css("visibility","visible"),e.options.started.call(e.$app[0]),e.$app.trigger("started")},paused:function(){var e=this;e.options.paused.call(e.$app[0]),e.$app.trigger("paused");var t=e.getPlaylistItem(e.curItemId);"radio"===t.type&&("flash"===e.player.media.pluginType?e.player.media.stop():(e.player.setSrc(""),e.player.setSrc(t.link+"?nocache="+Math.floor(1e4*Math.random())),e.player.load()))},timeupdate:function(){this.options.timeupdate.call(this.$app[0]),this.$app.trigger("timeupdate")},ended:function(){this.options.ended.call(this.$app[0]),this.$app.trigger("ended")},onItemChange:function(){this.options.onItemChange.call(this.$app[0]),this.$app.trigger("onItemChange")},onSetup:function(){this.options.onSetup.call(this.$app[0]),this.$app.trigger("onSetup")},onItemsAppended:function(){this.options.onItemsAppended.call(this.$app[0]),this.$app.trigger("onItemsAppended")}};"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),e.fn.vimuse=function(t){var i=e.extend(!0,{},e.fn.vimuse.defaults,t);return this.each(function(){if(!e.data(this,"vimuse")){var t=Object.create(s);t.init(i,this),e.data(this,"vimuse",t.playerAPI())}})},e.fn.vimuse.defaults={mediaType:"both",autoplay:!1,autoplayOnPlayerLoad:!1,volume:.8,shuffle:!1,startLanguage:"",reversePlaylistOrder:!1,showPlaylistOnLoad:!0,playlistProgress:!0,showURLLinks:!0,newWindowURLLinks:!0,showPurchaseLinks:!0,newWindowPurchaseLinks:!0,showDownloadLinks:!0,showLyricsLinks:!0,showFileTypeIcons:!0,showDeleteButtons:!0,showItemDuration:!0,enablePlaylistSort:!0,stopPlaybackOnPageHide:!0,playlistPosition:"bottom",bottomPlaylistMaxHeight:400,showPlaylistThumbs:!1,showAudioDetails:!0,showAudioCover:!0,showAudioTrackInfo:!0,showAuxControls:!0,showCurrentItemInfo:!0,fixPlayerOnScroll:!0,playerFixOffset:0,playlistURL:"playlist.json",playlistData:{},getID3Info:!0,pullRadioTrackInfo:!0,pullRadioStreamCover:!1,radioInfoPollInterval:5e3,enableCache:!0,cacheFolder:"cache",cacheFileName:"playlist-cache.json",cacheInterval:10,phpFolder:"php",scanMP3Folder:!1,mp3Folder:"",scanVideoFolder:!1,videoFolder:"",detectMobile:!1,youtubeAPIKey:"",dailymotionSyndication:"",youtubeFeed:!1,youtubeOptions:{source:"",userID:"",playlistID:"",search:"",limit:20},vimeoFeed:!1,vimeoOptions:{source:"",userID:"",albumID:"",channelID:"",limit:20},dailymotionFeed:!1,dailymotionOptions:{source:"",userID:"",playlistID:"",groupID:"",channelID:"",limit:20},started:function(){},paused:function(){},timeupdate:function(){},ended:function(){},onItemChange:function(){},onSetup:function(){},onItemsAppended:function(){}}}(jQuery,document,window);